<div class="row mb-4">
  <div class="col-12">
    <div class="card shadow" style="background-color: #2d2d2d; border: none">
      <div class="card-body">
        <h1 style="color: #ffffff; font-weight: 700">
          Device: {{.Device.Name}}
        </h1>
        <p style="color: #e0e0e0">Manufacturer: {{.Device.Manufacturer}}</p>
        <p style="color: #e0e0e0">Type: {{.Device.Type}}</p>
      </div>
    </div>
  </div>
</div>

<div class="mb-4 d-flex justify-content-between align-items-center">
  <h2 style="color: #ffffff; font-weight: 700">Integrations</h2>
  <a
    href="/devices/{{.Device.Id}}/integrations/new"
    class="btn btn-primary"
    style="background-color: #007bff; border: none; font-weight: 600"
    >Add New Integration</a
  >
</div>

<div class="row">
  {{range .Integrations}}
  <div class="col-md-4 mb-4">
    <div
      class="card shadow h-100"
      style="background-color: #2d2d2d; border: none"
    >
      <div class="card-body">
        <h5 class="card-title" style="color: #ffffff">{{.IntegrationType}}</h5>
        <p style="color: #e0e0e0">ID: {{.Id}}</p>
        <p style="color: #e0e0e0">Identifier: {{.Identifier}}</p>
        <p style="color: #e0e0e0">Host: {{.Host}}</p>
        <p style="color: #e0e0e0">Port: {{.Port}}</p>
        <p style="color: #e0e0e0">Protocol: {{.Protocol}}</p>
        <div class="d-flex justify-content-between">
          {{if eq .IntegrationType "OPC UA"}}
          <a
            href="/devices/{{$.Device.Id}}/integrations/{{.Id}}/browse"
            class="btn btn-primary"
            style="background-color: #007bff; border: none"
          >
            Browse Nodes
          </a>
          {{end}}
          <form
            action="/devices/{{.Device.Id}}/integrations/{{.Id}}/delete"
            method="post"
            style="display: inline"
          >
            {{$.xsrfdata}}
            <button
              type="submit"
              class="btn btn-danger"
              style="background-color: #dc3545; border: none"
            >
              Delete
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  {{else}}
  <div class="col-12">
    <div
      class="card shadow text-center"
      style="background-color: #2d2d2d; border: none"
    >
      <div class="card-body">
        <p style="color: #e0e0e0">
          No integrations found. Add a new integration to get started.
        </p>
      </div>
    </div>
  </div>
  {{end}}
</div>

<div class="mb-4">
  <h2 style="color: #ffffff; font-weight: 700">Snapshots</h2>
  <div class="card shadow" style="background-color: #2d2d2d; border: none">
    <div class="card-body">
      {{if .Snapshots}}
      <div class="table-responsive">
        <table class="table table-hover" style="color: #f5f5f5">
          <thead style="background-color: #3a3a3a">
            <tr>
              <th>Timestamp</th>
              <th>Nodes Data</th>
            </tr>
          </thead>
          <tbody>
            {{range .Snapshots}}
            <tr>
              <td>{{.Timestamp}}</td>
              <td>{{.Nodes}}</td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </div>
      {{else}}
      <p style="color: #f5f5f5">No snapshots found.</p>
      {{end}}
    </div>
  </div>
</div>
